<%if @instance%>
  $("#instance_<%=params[:id]%>").replaceWith("<%= j(render(partial: 'compute/instances/item', locals: {instance: @instance, target_state: @target_state })) %>");
  $("#instance_<%=params[:id]%>").update()
  $('#instance_<%=params[:id]%> [data-collapsable]').collapsable({collapsed: false});
<%else%>
  $("#instance_<%=params[:id]%>").remove();

  if($("table.instances tbody tr").length==0){
    $("table.instances tbody").prepend("<tr data-empty><td colspan=7>No instances available</td></tr>");
  }
<%end%>

<% if @close_modal %>
  MoModal.close();
<% end %>
